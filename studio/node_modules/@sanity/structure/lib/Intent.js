"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.defaultIntentChecker = exports.DEFAULT_INTENT_HANDLER = void 0;

var _DocumentList = require("./DocumentList");

var DEFAULT_INTENT_HANDLER = Symbol('Document type list canHandleIntent');
exports.DEFAULT_INTENT_HANDLER = DEFAULT_INTENT_HANDLER;

var defaultIntentChecker = (intentName, params, _ref) => {
  var pane = _ref.pane;
  var isEdit = intentName === 'edit';
  var isCreate = intentName === 'create';
  var typedSpec = pane;
  var paneFilter = typedSpec.options && typedSpec.options.filter || '';
  var paneParams = typedSpec.options && typedSpec.options.params || {};
  var typeName = typedSpec.schemaTypeName || (0, _DocumentList.getTypeNameFromSingleTypeFilter)(paneFilter, paneParams);
  var initialValueTemplates = typedSpec.initialValueTemplates || [];

  if (isCreate && params.template) {
    return initialValueTemplates.some(tpl => tpl.templateId === params.template);
  }

  return isEdit && params.id && params.type === typeName || isCreate && params.type === typeName;
};

exports.defaultIntentChecker = defaultIntentChecker;
defaultIntentChecker.identity = DEFAULT_INTENT_HANDLER;